<!DOCTYPE html>
<html lang="en">
<head>
        <title>"Scoping in Rust"</title>
        <link rel="shortcut icon" href="/images/favicon.ico">
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <link rel="stylesheet" href="https://blog.luizirber.org/theme/css/pygments.css" type="text/css" />
        <link rel="stylesheet" href="https://blog.luizirber.org/theme/css/main.css" type="text/css" />
        <link href="https://blog.luizirber.org/atom.xml" type="application/atom+xml" rel="alternate" title="Gabbleblotchits ATOM Feed" />
        <link href="https://blog.luizirber.org/feed.xml" type="application/rss+xml" rel="alternate" title="Gabbleblotchits RSS Feed" />
</head>

<body>

        <header>
          <h1>Gabbleblotchits</h1>

          <a href="mailto:contact@luizirber.org">
            <img class='email'
                 src='https://blog.luizirber.org/theme/icons/email.svg'
                 alt='email me'
                 title='email me'/>
          </a>
          <a href="https://social.lasanha.org/@luizirber">
            <img class='mastodon'
                 src='https://blog.luizirber.org/theme/icons/mastodon.svg'
                 alt='Mastodon icon'
                 title='Follow me on Mastodon'/>
          </a>
          <a href="https://github.com/luizirber">
            <img class='github'
                 src='https://blog.luizirber.org/theme/icons/github.svg'
                 alt='github projects'
                 title='github profile'/>
          </a>
          <a href="https://luizirber.newsblur.com">
            <img class='newsblur'
                 src='https://blog.luizirber.org/theme/icons/newsblur.svg'
                 alt='my shared stories on newsblur'
                 title='my shared stories on newsblur'/>
          </a>
          <a href="https://blog.luizirber.org/feed.xml" rel="alternative" type="application/rss+xml">
            <img class='rss'
                 src='https://blog.luizirber.org/theme/icons/feed.svg'
                 alt='RSS feed icon'
                 title='Subscribe to my RSS feed'/>
          </a>

<strong>Vogon Poetry, Computers and (some) biology</strong>        </header>


<nav>
    <a href="/">Home</a>
</nav>

<main>
    <h1>"Scoping in Rust"</h1>

    <time class="single" datetime="2018-03-07T12:00:00-03:00">07 Mar 2018</time>

    <!--
Luiz Irber, [06.03.18 20:56]
wooooooooow fiz uma gambiarra monstra que... tá certa Oo

Luiz Irber, [06.03.18 21:04]
vamos ver se consigo resumir:
eu escrevi um método para juntar duas MinHash (no fundo, é juntar dois vetores e manter os menores valores, pra dois conjuntos de vetores diferentes mins e abunds). Tá aqui o método: https://github.com/luizirber/sourmash-rust/blob/58f8c32f909a1be71c59af3a544bb4a8140daf84/src/lib.rs#L190

Luiz Irber, [06.03.18 21:05]
cheira muito a C++ porque... é meio que a mesma coisa que isso aqui faz: https://github.com/dib-lab/sourmash/blob/1dde662ba436d494770d99233e5aea7498646899/sourmash_lib/kmer_min_hash.hh#L337

Luiz Irber, [06.03.18 21:07]
se olhar a assinatura, pode ver que eu retorno os dois vetores com os valores finais, o que é diferente do que a função em C++ faz: ela modifica os atributos mins`e `abunds do próprio objeto https://github.com/dib-lab/sourmash/blob/1dde662ba436d494770d99233e5aea7498646899/sourmash_lib/kmer_min_hash.hh#L392

Luiz Irber, [06.03.18 21:08]
isso acontece porque eu não conseguia modificar no meu struct em Rust, porque na linha https://github.com/luizirber/sourmash-rust/blob/58f8c32f909a1be71c59af3a544bb4a8140daf84/src/lib.rs#L196 eu estava criando iteradores, e se tentasse substituir no struct lá no final dava um erro dizendo que eu estava tentando modificar um borrowed value

Luiz Irber, [06.03.18 21:09]
como eu tava querendo fazer funcionar, acabei deixando com esse jeito de retornar vetores mesmo e fui adiante

Luiz Irber, [06.03.18 21:10]
porque eu não conseguia entender como dizer "OK, eu já parei de mexer no iter, pelamordedeus deixa eu mexer no struct agora!"

Luiz Irber, [06.03.18 21:23]
hoje tava lendo o Programming Rust e percebi que é totalmente OK usar blocos pra determinar o lifetime... o que levou a isso! https://github.com/luizirber/sourmash-rust/blob/acd6037f518a5ad9893cc95bf59ebf5947b23a67/src/lib.rs#L196

Luiz Irber, [06.03.18 21:23]
só indentei tudo e coloquei dentro de um bloco... o que me deixa finalmente fazer minha intenção original:
https://github.com/luizirber/sourmash-rust/blob/acd6037f518a5ad9893cc95bf59ebf5947b23a67/src/lib.rs#L276

Luiz Irber, [06.03.18 21:23]
THE END

-->

    <div class="taglist"></div>
</main>

        <hr />
        <footer class="footer-menu">
            <a href="#top">Back to the top</a>
            <hr />
        </footer>

</body>
</html>